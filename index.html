    <!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Ocean Explorer - Okyanus Macerasƒ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #000;
        }

        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #000428, #004e92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            text-align: center;
        }

        .title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #00b4db, #0083b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 180, 219, 0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 40px;
            color: #a8e6cf;
            max-width: 600px;
        }

        .start-button {
            padding: 18px 45px;
            font-size: 1.4rem;
            background: linear-gradient(45deg, #00b4db, #0083b0);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            margin: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 10px 30px rgba(0, 180, 219, 0.4);
        }

        .start-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 180, 219, 0.6);
        }

        #gameScreen {
            display: none;
            width: 100%;
            height: 100vh;
        }

        #ui {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .fish-selector {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .fish-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid transparent;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .fish-btn:hover {
            transform: scale(1.1);
            border-color: #00b4db;
        }

        .fish-btn.active {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.2);
            box-shadow: 0 0 20px #00ff88;
        }

        #controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .control-info {
            margin: 5px 0;
            font-size: 0.9rem;
            color: #a8e6cf;
        }

        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            font-size: 1.5rem;
        }

        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Y√úKLEME EKRANI -->
    <div id="loading">
        <div style="text-align: center;">
            <div style="font-size: 2rem; margin-bottom: 20px;">üåä</div>
            <div>Okyanus y√ºkleniyor...</div>
            <div id="loadProgress" style="margin-top: 10px; color: #00b4db;">%0</div>
        </div>
    </div>

    <!-- BA≈ûLANGI√á EKRANI -->
    <div id="startScreen">
        <h1 class="title">üåä 3D OCEAN EXPLORER</h1>
        <p class="subtitle">Derin okyanusun gizemli d√ºnyasƒ±nƒ± ke≈üfet! 10 farklƒ± deniz canlƒ±sƒ± arasƒ±ndan se√ßim yap ve okyanusta √∂zg√ºrce y√ºz!</p>
        <button class="start-button" id="startButton">OKYANUSA DAL</button>
        <div style="margin-top: 30px; color: #66fcf1; font-size: 0.9rem;">
            <p>üéÆ Kontroller: Dokunmatik/Tƒ±klama ile balƒ±ƒüƒ± y√∂nlendir | Balƒ±k se√ßmek i√ßin a≈üaƒüƒ±daki butonlarƒ± kullan</p>
        </div>
    </div>

    <!-- OYUN EKRANI -->
    <div id="gameScreen">
        <div id="ui">
            <h2>ü¶à Okyanus Macerasƒ±</h2>
            <div id="fishInfo">Se√ßili Balƒ±k: <span id="currentFish">Yunus</span></div>
            <div id="positionInfo">Konum: <span id="currentPos">0, 0, 0</span></div>
        </div>

        <div class="fish-selector" id="fishSelector">
            <!-- Balƒ±k butonlarƒ± JavaScript ile eklenecek -->
        </div>

        <div id="controls">
            <h3>üéÆ Kontroller</h3>
            <div class="control-info">‚Ä¢ Dokun/Tƒ±kla: Balƒ±ƒüƒ± hareket ettir</div>
            <div class="control-info">‚Ä¢ Fareyi s√ºr√ºkle: Kamera d√∂nd√ºr</div>
            <div class="control-info">‚Ä¢ Fare tekerleƒüi: Zoom</div>
            <button onclick="backToMenu()" style="margin-top: 10px; padding: 8px 15px; background: #ff6b6b; border: none; border-radius: 8px; color: white; cursor: pointer;">Men√º</button>
        </div>
    </div>

    <!-- Three.js Script -->
    <script type="module">
        import * as THREE from 'https://esm.run/three';
        import { OrbitControls } from 'https://esm.run/three/examples/jsm/controls/OrbitControls.js';

        console.log("üåä 3D OCEAN EXPLORER Y√úKLENƒ∞YOR...");

        // DOM ELEMENTLERƒ∞
        const loadingScreen = document.getElementById('loading');
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const startButton = document.getElementById('startButton');
        const loadProgress = document.getElementById('loadProgress');
        const currentFish = document.getElementById('currentFish');
        const currentPos = document.getElementById('currentPos');
        const fishSelector = document.getElementById('fishSelector');

        // DENƒ∞Z CANLILARI
        const MARINE_LIFE = [
            { emoji: 'üê¨', name: 'Yunus', color: 0x66ccff, speed: 2.5, size: 1.2 },
            { emoji: 'ü¶à', name: 'K√∂pekbalƒ±ƒüƒ±', color: 0x888888, speed: 3.0, size: 1.5 },
            { emoji: 'üê†', name: 'Balƒ±k', color: 0xff6666, speed: 1.8, size: 0.8 },
            { emoji: 'üê°', name: 'Balon Balƒ±ƒüƒ±', color: 0xffff66, speed: 1.2, size: 0.9 },
            { emoji: 'ü¶ë', name: 'M√ºrekkepbalƒ±ƒüƒ±', color: 0x9933ff, speed: 2.0, size: 1.0 },
            { emoji: 'üêô', name: 'Ahtapot', color: 0xff3366, speed: 1.5, size: 1.1 },
            { emoji: 'üê¢', name: 'Deniz Kaplumbaƒüasƒ±', color: 0x66ff99, speed: 1.0, size: 1.3 },
            { emoji: 'ü¶Ä', name: 'Yenge√ß', color: 0xff3333, speed: 0.8, size: 0.7 },
            { emoji: 'ü¶ê', name: 'Karides', color: 0xff9966, speed: 1.3, size: 0.5 },
            { emoji: 'üêã', name: 'Balina', color: 0x6699ff, speed: 1.7, size: 2.0 }
        ];

        // THREE.JS AYARLARI
        let scene, camera, renderer, controls;
        let ocean, fishGroup, seaweedGroup, bubblesGroup;
        let playerFish = null;
        let selectedFishIndex = 0;
        let mouse = new THREE.Vector2();
        let raycaster = new THREE.Raycaster();
        let targetPosition = new THREE.Vector3(0, 0, 0);
        let isMoving = false;

        // Y√úKLEME ƒ∞LERLEMESƒ∞
        let loadCounter = 0;
        const totalLoadSteps = 10;

        function updateLoadProgress(step) {
            loadCounter = step;
            const percent = Math.floor((loadCounter / totalLoadSteps) * 100);
            loadProgress.textContent = `%${percent}`;
        }

        // BALIK SE√áƒ∞Cƒ∞ BUTONLARI OLU≈ûTUR
        function createFishButtons() {
            MARINE_LIFE.forEach((fish, index) => {
                const button = document.createElement('div');
                button.className = 'fish-btn';
                if (index === 0) button.classList.add('active');
                button.innerHTML = fish.emoji;
                button.title = fish.name;
                
                button.addEventListener('click', () => {
                    selectFish(index);
                });
                
                fishSelector.appendChild(button);
            });
        }

        // BALIK SE√á
        function selectFish(index) {
            selectedFishIndex = index;
            const fish = MARINE_LIFE[index];
            
            // Buton aktifliƒüini g√ºncelle
            document.querySelectorAll('.fish-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });
            
            // UI'ƒ± g√ºncelle
            currentFish.textContent = fish.name;
            
            // Oyuncu balƒ±ƒüƒ±nƒ± g√ºncelle
            if (playerFish) {
                // Renk ve boyut g√ºncelle
                playerFish.children[0].material.color.setHex(fish.color);
                playerFish.scale.setScalar(fish.size);
            }
        }

        // THREE.JS SAHNESƒ∞Nƒ∞ OLU≈ûTUR
        function initThreeJS() {
            updateLoadProgress(1);
            
            // SAHNE
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x000044, 10, 200);
            updateLoadProgress(2);

            // KAMERA
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 20);
            updateLoadProgress(3);

            // RENDERER
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000044);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            gameScreen.appendChild(renderer.domElement);
            updateLoadProgress(4);

            // KONTROLLER
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.maxPolarAngle = Math.PI / 2;
            controls.minDistance = 5;
            controls.maxDistance = 100;
            updateLoadProgress(5);

            // I≈ûIKLAR
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 20, 5);
            directionalLight.castShadow = true;
            directionalLight.shadow.mapSize.width = 2048;
            directionalLight.shadow.mapSize.height = 2048;
            scene.add(directionalLight);

            const underwaterLight = new THREE.PointLight(0x0066ff, 1, 50);
            underwaterLight.position.set(0, 5, 0);
            scene.add(underwaterLight);
            updateLoadProgress(6);

            // OKYANUS ZEMƒ∞Nƒ∞
            const oceanGeometry = new THREE.PlaneGeometry(200, 200, 100, 100);
            const oceanMaterial = new THREE.MeshLambertMaterial({ 
                color: 0x004488,
                transparent: true,
                opacity: 0.8
            });
            ocean = new THREE.Mesh(oceanGeometry, oceanMaterial);
            ocean.rotation.x = -Math.PI / 2;
            ocean.receiveShadow = true;
            scene.add(ocean);
            updateLoadProgress(7);

            // DENƒ∞Z YOSUNLARI
            seaweedGroup = new THREE.Group();
            const seaweedColors = [0x006600, 0x008800, 0x00aa00];
            
            for (let i = 0; i < 50; i++) {
                const height = Math.random() * 3 + 1;
                const radius = 0.1;
                const segments = 8;
                
                const seaweedGeometry = new THREE.ConeGeometry(radius, height, segments);
                const seaweedMaterial = new THREE.MeshLambertMaterial({ 
                    color: seaweedColors[Math.floor(Math.random() * seaweedColors.length)],
                    transparent: true,
                    opacity: 0.9
                });
                
                const seaweed = new THREE.Mesh(seaweedGeometry, seaweedMaterial);
                seaweed.position.set(
                    (Math.random() - 0.5) * 180,
                    height / 2,
                    (Math.random() - 0.5) * 180
                );
                seaweed.rotation.x = Math.PI;
                seaweedGroup.add(seaweed);
            }
            scene.add(seaweedGroup);
            updateLoadProgress(8);

            // KABARCIKLAR
            bubblesGroup = new THREE.Group();
            const bubbleGeometry = new THREE.SphereGeometry(0.1, 8, 8);
            const bubbleMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xffffff,
                transparent: true,
                opacity: 0.5
            });
            
            for (let i = 0; i < 100; i++) {
                const bubble = new THREE.Mesh(bubbleGeometry, bubbleMaterial);
                bubble.position.set(
                    (Math.random() - 0.5) * 200,
                    Math.random() * 20,
                    (Math.random() - 0.5) * 200
                );
                bubble.userData.speed = Math.random() * 0.02 + 0.01;
                bubble.userData.initialY = bubble.position.y;
                bubblesGroup.add(bubble);
            }
            scene.add(bubblesGroup);
            updateLoadProgress(9);

            // DENƒ∞Z CANLILARI GRUBU
            fishGroup = new THREE.Group();
            scene.add(fishGroup);

            // RASTGELE BALIKLAR OLU≈ûTUR
            createRandomFish(20);
            
            // OYUNCU BALIƒûI
            createPlayerFish();
            
            updateLoadProgress(10);
        }

        // RASTGELE BALIKLAR OLU≈ûTUR
        function createRandomFish(count) {
            for (let i = 0; i < count; i++) {
                const fishType = MARINE_LIFE[Math.floor(Math.random() * MARINE_LIFE.length)];
                createFish(fishType, true);
            }
        }

        // BALIK OLU≈ûTUR
        function createFish(fishType, isRandom = false) {
            // Balƒ±k g√∂vdesi
            const bodyGeometry = new THREE.ConeGeometry(0.5, 1.5, 8);
            bodyGeometry.rotateZ(Math.PI / 2);
            const bodyMaterial = new THREE.MeshLambertMaterial({ color: fishType.color });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.castShadow = true;

            // Balƒ±k kuyruƒüu
            const tailGeometry = new THREE.ConeGeometry(0.3, 0.8, 8);
            tailGeometry.rotateZ(-Math.PI / 2);
            const tailMaterial = new THREE.MeshLambertMaterial({ color: fishType.color });
            const tail = new THREE.Mesh(tailGeometry, tailMaterial);
            tail.position.x = -0.8;

            // Balƒ±k grubu
            const fish = new THREE.Group();
            fish.add(body);
            fish.add(tail);
            fish.scale.setScalar(fishType.size);

            if (isRandom) {
                // Rastgele pozisyon
                fish.position.set(
                    (Math.random() - 0.5) * 180,
                    Math.random() * 10 + 2,
                    (Math.random() - 0.5) * 180
                );
                
                // Rastgele y√∂n
                fish.rotation.y = Math.random() * Math.PI * 2;
                
                // Rastgele hareket verileri
                fish.userData = {
                    speed: fishType.speed * (0.5 + Math.random() * 0.5),
                    direction: new THREE.Vector3(
                        Math.random() - 0.5,
                        Math.random() * 0.2 - 0.1,
                        Math.random() - 0.5
                    ).normalize(),
                    isRandom: true,
                    type: fishType.name
                };
                
                fishGroup.add(fish);
            }

            return fish;
        }

        // OYUNCU BALIƒûI OLU≈ûTUR
        function createPlayerFish() {
            const fishType = MARINE_LIFE[selectedFishIndex];
            playerFish = createFish(fishType, false);
            
            playerFish.position.set(0, 5, 0);
            playerFish.userData = {
                speed: fishType.speed,
                isPlayer: true,
                type: fishType.name
            };
            
            scene.add(playerFish);
            
            // Kamera hedefini oyuncu balƒ±ƒüƒ±na ayarla
            controls.target.copy(playerFish.position);
        }

        // FARE/KONUM OLUMLARI
        function setupEventListeners() {
            // TIKLAMA/DOKUNMA
            renderer.domElement.addEventListener('click', onMouseClick);
            renderer.domElement.addEventListener('touchstart', onTouchStart);
            
            // PENCERE BOYUTU DEƒûƒ∞≈ûƒ∞KLƒ∞ƒûƒ∞
            window.addEventListener('resize', onWindowResize);
            
            // ESC MEN√ú
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    backToMenu();
                }
            });
        }

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObject(ocean);
            
            if (intersects.length > 0) {
                targetPosition.copy(intersects[0].point);
                targetPosition.y = 5; // Balƒ±k y√ºksekliƒüi
                isMoving = true;
            }
        }

        function onTouchStart(event) {
            event.preventDefault();
            if (event.touches.length === 1) {
                mouse.x = (event.touches[0].clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.touches[0].clientY / window.innerHeight) * 2 + 1;
                
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObject(ocean);
                
                if (intersects.length > 0) {
                    targetPosition.copy(intersects[0].point);
                    targetPosition.y = 5;
                    isMoving = true;
                }
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // ANƒ∞MASYON D√ñNG√úS√ú
        function animate() {
            requestAnimationFrame(animate);
            
            // KONTROLLERƒ∞ G√úNCELLE
            controls.update();
            
            // OYUNCU BALIƒûI HAREKETƒ∞
            if (playerFish && isMoving) {
                const direction = new THREE.Vector3()
                    .subVectors(targetPosition, playerFish.position)
                    .normalize();
                
                const distance = playerFish.position.distanceTo(targetPosition);
                
                if (distance > 0.5) {
                    playerFish.position.add(
                        direction.multiplyScalar(playerFish.userData.speed * 0.1)
                    );
                    
                    // Balƒ±k y√∂n√ºn√º g√ºncelle
                    playerFish.lookAt(targetPosition);
                    
                    // Konum bilgisini g√ºncelle
                    currentPos.textContent = 
                        `${playerFish.position.x.toFixed(1)}, ${playerFish.position.y.toFixed(1)}, ${playerFish.position.z.toFixed(1)}`;
                } else {
                    isMoving = false;
                }
                
                // Kamera hedefini takip et
                controls.target.copy(playerFish.position);
            }
            
            // RASTGELE BALIKLARI HAREKET ETTƒ∞R
            fishGroup.children.forEach(fish => {
                if (fish.userData.isRandom) {
                    // ƒ∞leri hareket
                    fish.translateX(fish.userData.speed * 0.05);
                    
                    // Y√∂n deƒüi≈ütirme (rastgele)
                    if (Math.random() < 0.02) {
                        fish.userData.direction.set(
                            Math.random() - 0.5,
                            Math.random() * 0.2 - 0.1,
                            Math.random() - 0.5
                        ).normalize();
                    }
                    
                    // Sƒ±nƒ±r kontrol√º
                    if (Math.abs(fish.position.x) > 90 || 
                        Math.abs(fish.position.z) > 90) {
                        fish.userData.direction.x *= -1;
                        fish.userData.direction.z *= -1;
                    }
                    
                    if (fish.position.y < 2 || fish.position.y > 15) {
                        fish.userData.direction.y *= -1;
                    }
                    
                    // Balƒ±ƒüƒ± d√∂nd√ºr
                    fish.lookAt(
                        fish.position.x + fish.userData.direction.x,
                        fish.position.y + fish.userData.direction.y,
                        fish.position.z + fish.userData.direction.z
                    );
                }
            });
            
            // KABARCIK ANƒ∞MASYONU
            bubblesGroup.children.forEach(bubble => {
                bubble.position.y += bubble.userData.speed;
                if (bubble.position.y > bubble.userData.initialY + 20) {
                    bubble.position.y = bubble.userData.initialY;
                }
            });
            
            // DENƒ∞Z YOSUNU DALGASI
            const time = Date.now() * 0.001;
            seaweedGroup.children.forEach((seaweed, i) => {
                seaweed.rotation.z = Math.sin(time + i) * 0.2;
            });
            
            // RENDER
            renderer.render(scene, camera);
        }

        // OYUNU BA≈ûLAT
        function startGame() {
            console.log("üåä OYUN BA≈ûLATILIYOR...");
            
            // Ekranlarƒ± deƒüi≈ütir
            startScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // Y√ºkleme ekranƒ±nƒ± gizle
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 500);
            
            // Animasyonu ba≈ülat
            animate();
        }

        // MEN√úYE D√ñN
        function backToMenu() {
            gameScreen.style.display = 'none';
            startScreen.style.display = 'flex';
        }

        // BUTONLARI BA≈ûLAT
        function initializeButtons() {
            startButton.addEventListener('click', startGame);
            
            // Global fonksiyon
            window.backToMenu = backToMenu;
        }

        // SAYFA Y√úKLENDƒ∞ƒûƒ∞NDE
        window.addEventListener('load', function() {
            console.log("‚úÖ Sayfa y√ºklendi!");
            
            // Balƒ±k butonlarƒ±nƒ± olu≈ütur
            createFishButtons();
            
            // Three.js sahnesini olu≈ütur
            initThreeJS();
            
            // Event listener'larƒ± kur
            setupEventListeners();
            
            // Butonlarƒ± ba≈ülat
            initializeButtons();
            
            // Y√ºkleme ekranƒ±nƒ± gizle
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1500);
            
            console.log("üéÆ Oyun hazƒ±r! 'OKYANUSA DAL' butonuna tƒ±kla!");
        });

        // HATA YAKALAMA
        window.addEventListener('error', function(e) {
            console.error('‚ùå Hata:', e.error);
            alert('Bir hata olu≈ütu: ' + e.message);
        });
    </script>
</body>
</html>   
